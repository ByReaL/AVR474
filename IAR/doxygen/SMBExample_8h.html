<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="atmel-header_files/filelist.xml">
<link rel=Edit-Time-Data href="atmel-header_files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]-->
<title>@DOC_TITLE@</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>ping.zhou</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>ping.zhou</o:LastAuthor>
  <o:Revision>3</o:Revision>
  <o:TotalTime>0</o:TotalTime>
  <o:Created>2010-08-04T02:58:00Z</o:Created>
  <o:LastSaved>2010-08-04T02:58:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>51</o:Words>
  <o:Characters>297</o:Characters>
  <o:Company>Atmel</o:Company>
  <o:Lines>2</o:Lines>
  <o:Paragraphs>1</o:Paragraphs>
  <o:CharactersWithSpaces>347</o:CharactersWithSpaces>
  <o:Version>11.9999</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:Zoom>150</w:Zoom>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]-->
<link rel=Stylesheet type="text/css" media=all href="doxygen.css">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:536902279 -2147483648 8 0 511 0;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
@font-face
	{font-family:SimSun;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 135135232 16 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:SimSun;}
p
	{font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:SimSun;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US link=blue vlink=blue style='tab-interval:.5in'>

<div class=Section1>

<table class=MsoNormalTable border=0 cellpadding=0 width="100%"
 style='width:100.0%;mso-cellspacing:1.5pt;background:white'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes'>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p><a href="http://www.atmel.com"><span style='text-decoration:none;
  text-underline:none'><img border=0 width=109 height=50 id="_x0000_i1025"
  src=atmel.jpg></span></a></p>
  <p class=MsoNormal><o:p>&nbsp;</o:p></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p class=MsoNormal><span class=SpellE><strong><span style='font-size:24.0pt;
  font-family:Helvetica;color:black'>SmartBattery</span></strong></span><strong><span
  style='font-size:24.0pt;font-family:Helvetica;color:black'> Device
  Application Note</span></strong></p>
  </td>
  <td style='padding:.75pt .75pt .75pt .75pt'>
  <p><a href="http://www.atmel.com/products/AVR"><span style='text-decoration:
  none;text-underline:none'><img border=0 width=138 height=77 id="_x0000_i1026"
  src="AVR_logo_blue.gif"></span></a></p>
  <p class=MsoNormal><o:p>&nbsp;</o:p></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1;mso-yfti-lastrow:yes;height:.75pt'>
  <td colspan=3 style='padding:.75pt .75pt .75pt .75pt;height:.75pt'
  background=blue.gif>
  <p class=MsoNormal><span style='font-size:1.0pt;mso-bidi-font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

</div>

</body>

</html>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_29ae905079a6eb1b30b29288f24757bc.html">lib_mcu</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_c2f2e611aade4b362b2bd89f67a7ad7a.html">sm_bus</a>
  </div>
</div>
<div class="contents">
<h1>SMBExample.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
Atmel Corporation<p>
<ul>
<li>File : SMBslave.h</li><li>Compiler : IAR EWAAVR 4.10b</li></ul>
<p>
<ul>
<li>Support mail : <a href="mailto:avr@atmel.com">avr@atmel.com</a></li></ul>
<p>
<ul>
<li>Supported devices : All AVR devices with a TWI module can be used. The example is written for ATmega32</li></ul>
<p>
<ul>
<li>AppNote : AVR316 - SMBus slave</li></ul>
<p>
<ul>
<li>Description : Header file for <a class="el" href="SMBExample_8c.html">SMBExample.c</a>.</li></ul>
<p>
<dl class="rcs" compact><dt><b>Revision</b></dt><dd>5627 </dd></dl>
<dl class="rcs" compact><dt><b>Date</b></dt><dd>2009-05-15 14:49:21 +0800 (Fri, 15 May 2009) </dd></dl>

<p>Definition in file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>
<code>#include &quot;<a class="el" href="SMBSlave_8h-source.html">SMBSlave.h</a>&quot;</code><br>

<p>
<div class="dynheader">
Include dependency graph for SMBExample.h:</div>
<div class="dynsection">
<p><center><img src="SMBExample_8h__incl.gif" border="0" usemap="#lib_mcu/sm_bus/SMBExample.h_map" alt=""></center>
<map name="lib_mcu/sm_bus/SMBExample.h_map">
<area shape="rect" href="SMBSlave_8h.html" title="SMBSlave.h" alt="" coords="65,80,156,107"></map>
</div>

<p>
<div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dynsection">
<p><center><img src="SMBExample_8h__dep__incl.gif" border="0" usemap="#lib_mcu/sm_bus/SMBExample.hdep_map" alt=""></center>
<map name="lib_mcu/sm_bus/SMBExample.hdep_map">
<area shape="rect" href="SMBExample_8c.html" title="lib_mcu/sm_bus/SMBExample.c" alt="" coords="5,80,216,107"></map>
</div>

<p>
<a href="SMBExample_8h-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#c51b255107344fc628ea56703995e0be">SMB_COMMAND_MULTIPLY_BY_TWO</a>&nbsp;&nbsp;&nbsp;0x60</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#a44a4000bb452fcbf18b59f0117bdb98">SMB_COMMAND_READ_EE_BYTE</a>&nbsp;&nbsp;&nbsp;0x40</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#cf822cab2cf061c4ca6506be8b87f594">SMB_COMMAND_READ_EE_WORD</a>&nbsp;&nbsp;&nbsp;0x41</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#719971191df08fcae859097794ab7d23">SMB_COMMAND_RETURN_SWITCHES</a>&nbsp;&nbsp;&nbsp;0x20</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#d6034ad0d72529d10f22ff3346bb9d82">SMB_COMMAND_RETURN_VENDOR_STRING</a>&nbsp;&nbsp;&nbsp;0x10</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#e1027d1453db8e1c98d0e79769cc3054">SMB_COMMAND_SET_EE_POINTER</a>&nbsp;&nbsp;&nbsp;0x30</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#635a666ff995efcc0e9cfb22cf55176a">SMB_COMMAND_SUM_OF_BYTES</a>&nbsp;&nbsp;&nbsp;0x70</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#8d6579276962ceb57c807b89e6703ba5">SMB_COMMAND_WRITE_LED_BLOCK</a>&nbsp;&nbsp;&nbsp;0x52</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#53b3e115c56a814203a0ec589a5636ed">SMB_COMMAND_WRITE_LED_BYTE</a>&nbsp;&nbsp;&nbsp;0x50</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#eeb5209cfcbfd4987706653faab11c6d">SMB_COMMAND_WRITE_LED_WORD</a>&nbsp;&nbsp;&nbsp;0x51</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#d2f18ece784b5800b2e4db0b3d62cb9d">OutputLedBlock</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#f53c45474d90adf6e29810a3c724fed7">OutputLedByte</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#c44fca9c8594a1b7446c4331eb46912b">OutputLedWord</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#5cba462a6c300e74f28f73f6274a66b5">ProcessMessage</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepares response to all supported protocols except Receive Byte.  <a href="#5cba462a6c300e74f28f73f6274a66b5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#d62558a9ac4e46e16d51ba623ef7525d">ProcessReceiveByte</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepares the response to a Receive Byte protocol..  <a href="#d62558a9ac4e46e16d51ba623ef7525d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#befd3df1eb8bf2f09ce989ea54ff734d">ReadEepromByte</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#930726c0213764c7f8ee449f3a197c93">ReadEepromWord</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#c5f8d3855e963e841da6f31237070401">ReturnParameterTimesTwo</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#e768cd46e76417601b6278b2e57be69d">ReturnSumOfBytes</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#a3e5d166dcbef5782cd80215c5b0c652">ReturnSwitchesPressed</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#8de78c331eb9348dfc6e27d7a75dd484">ReturnVendorString</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#5a8fba23357f9086d924367b0b6a52b8">SetEepromPointer</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="SMBExample_8h.html#8708350f7bd6e45dd828f9375c3d1ab8">UndefinedCommand</a> (SMBData *<a class="el" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666">smb</a>)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="c51b255107344fc628ea56703995e0be"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_MULTIPLY_BY_TWO" ref="c51b255107344fc628ea56703995e0be" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_MULTIPLY_BY_TWO&nbsp;&nbsp;&nbsp;0x60          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00036">36</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a44a4000bb452fcbf18b59f0117bdb98"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_READ_EE_BYTE" ref="a44a4000bb452fcbf18b59f0117bdb98" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_READ_EE_BYTE&nbsp;&nbsp;&nbsp;0x40          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00031">31</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="cf822cab2cf061c4ca6506be8b87f594"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_READ_EE_WORD" ref="cf822cab2cf061c4ca6506be8b87f594" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_READ_EE_WORD&nbsp;&nbsp;&nbsp;0x41          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00032">32</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="719971191df08fcae859097794ab7d23"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_RETURN_SWITCHES" ref="719971191df08fcae859097794ab7d23" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_RETURN_SWITCHES&nbsp;&nbsp;&nbsp;0x20          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00029">29</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="d6034ad0d72529d10f22ff3346bb9d82"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_RETURN_VENDOR_STRING" ref="d6034ad0d72529d10f22ff3346bb9d82" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_RETURN_VENDOR_STRING&nbsp;&nbsp;&nbsp;0x10          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00028">28</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e1027d1453db8e1c98d0e79769cc3054"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_SET_EE_POINTER" ref="e1027d1453db8e1c98d0e79769cc3054" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_SET_EE_POINTER&nbsp;&nbsp;&nbsp;0x30          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00030">30</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="635a666ff995efcc0e9cfb22cf55176a"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_SUM_OF_BYTES" ref="635a666ff995efcc0e9cfb22cf55176a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_SUM_OF_BYTES&nbsp;&nbsp;&nbsp;0x70          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00037">37</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8d6579276962ceb57c807b89e6703ba5"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_WRITE_LED_BLOCK" ref="8d6579276962ceb57c807b89e6703ba5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_WRITE_LED_BLOCK&nbsp;&nbsp;&nbsp;0x52          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00035">35</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="53b3e115c56a814203a0ec589a5636ed"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_WRITE_LED_BYTE" ref="53b3e115c56a814203a0ec589a5636ed" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_WRITE_LED_BYTE&nbsp;&nbsp;&nbsp;0x50          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00033">33</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<a class="anchor" name="eeb5209cfcbfd4987706653faab11c6d"></a><!-- doxytag: member="SMBExample.h::SMB_COMMAND_WRITE_LED_WORD" ref="eeb5209cfcbfd4987706653faab11c6d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SMB_COMMAND_WRITE_LED_WORD&nbsp;&nbsp;&nbsp;0x51          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="SMBExample_8h-source.html#l00034">34</a> of file <a class="el" href="SMBExample_8h-source.html">SMBExample.h</a>.</p>

<p>Referenced by <a class="el" href="SMBExample_8c-source.html#l00124">ProcessMessage()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="d2f18ece784b5800b2e4db0b3d62cb9d"></a><!-- doxytag: member="SMBExample.h::OutputLedBlock" ref="d2f18ece784b5800b2e4db0b3d62cb9d" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OutputLedBlock           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="f53c45474d90adf6e29810a3c724fed7"></a><!-- doxytag: member="SMBExample.h::OutputLedByte" ref="f53c45474d90adf6e29810a3c724fed7" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OutputLedByte           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="c44fca9c8594a1b7446c4331eb46912b"></a><!-- doxytag: member="SMBExample.h::OutputLedWord" ref="c44fca9c8594a1b7446c4331eb46912b" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OutputLedWord           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5cba462a6c300e74f28f73f6274a66b5"></a><!-- doxytag: member="SMBExample.h::ProcessMessage" ref="5cba462a6c300e74f28f73f6274a66b5" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessMessage           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepares response to all supported protocols except Receive Byte. 
<p>
This function gets called whenever a Write byte, Write word, Read byte, Read word, Process call, Block write, Block read or Block write, block read process call protocol is in progress. The function is called rigth after a Stop or Repeated start condition is received.<p>
This function, along with ProcessReceiveByte implements the application specific parts of the SMBus slave. For this reason, it can get very large. To remedy this, it has been broken up into one inlined function per command code.<p>
Since the TWI module does not diffrentiate between a Stop condition and a repeated start condition, it is important that smb-&gt;state is set in this function, to reflect the state of the SMBus driver.<p>
When this function is called, the data receieved is available through smb-&gt;rxBuffer array. All data received (excluding SLA+W) is available. The total number of valid bytes in smb-&gt;rxBuffer is available in smb-&gt;rxLength. The command code is always available in smb-&gt;rxBuffer[0]. The rest of the array is filled according to the SMBus specification.<p>
For Write byte, Write word and Block write, data must simply be copied to their destination. smb-&gt;state should then be set to SMB_STATE_IDLE before returning.<p>
For Read byte, Read word, Process call, Block read and Block write, block read process call, a response must be made ready and put in smb-txBuffer. The data in smb-&gt;txBuffer includes all data to be sent back by the SMBus driver (excluding PEC). The smb-&gt;txLength variable must be set to the total number of bytes to be transmitted (excluding PEC). When the response is complete, the smb-&gt; state variable should be set to SMB_STATE_WRITE_READ_REQUESTED before returning.<p>
In the following examples, it is explained how to prepare a response to these protocols.<p>
Read byte: <br>
 <code> smb-&gt;txBuffer[0] = Data byte <br>
 smb-&gt;txLength = 1 <br>
</code><p>
Read word / Process call: <br>
 <code> smb-&gt;txBuffer[0] = Data byte low <br>
 smb-&gt;txBuffer[1] = Data byte high <br>
 smb-&gt;txLength = 2 <br>
</code><p>
Block read / Block write, block read process call: <br>
<code> smb-&gt;txBuffer[0] = Byte count (n) <br>
 smb-&gt;txBuffer[1] = Data byte 1 <br>
 : <br>
 : <br>
 smb-&gt;txBuffer[n] = Data byte n <br>
 smb-&gt;txLength = n + 1 <br>
</code><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>smb</em>&nbsp;</td><td>Pointer to the SMBus driver's SMBData struct.</td></tr>
  </table>
</dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>While this runs the SMBCLK is held low, and it is thus important to keep the functions short enough not to violate the SMBus T_LOW:SEXT of 25ms. If this happens, the master will time out and drop the lines, and since the AVR's TWI module is I2C compatible there is no timeout in the TWI module. The AVR can then hold the SMBDAT line low waiting for clock, and thus block the bus indefinitely. </dd></dl>

<p>Definition at line <a class="el" href="SMBExample_8c-source.html#l00124">124</a> of file <a class="el" href="SMBExample_8c-source.html">SMBExample.c</a>.</p>

<p>References <a class="el" href="SMBExample_8c-source.html#l00365">OutputLedBlock()</a>, <a class="el" href="SMBExample_8c-source.html#l00312">OutputLedByte()</a>, <a class="el" href="SMBExample_8c-source.html#l00338">OutputLedWord()</a>, <a class="el" href="SMBExample_8c-source.html#l00276">ReadEepromByte()</a>, <a class="el" href="SMBExample_8c-source.html#l00294">ReadEepromWord()</a>, <a class="el" href="SMBExample_8c-source.html#l00398">ReturnParameterTimesTwo()</a>, <a class="el" href="SMBExample_8c-source.html#l00432">ReturnSumOfBytes()</a>, <a class="el" href="SMBExample_8c-source.html#l00217">ReturnSwitchesPressed()</a>, <a class="el" href="SMBExample_8c-source.html#l00189">ReturnVendorString()</a>, <a class="el" href="SMBExample_8c-source.html#l00235">SetEepromPointer()</a>, <a class="el" href="SMBExample_8h-source.html#l00036">SMB_COMMAND_MULTIPLY_BY_TWO</a>, <a class="el" href="SMBExample_8h-source.html#l00031">SMB_COMMAND_READ_EE_BYTE</a>, <a class="el" href="SMBExample_8h-source.html#l00032">SMB_COMMAND_READ_EE_WORD</a>, <a class="el" href="SMBExample_8h-source.html#l00029">SMB_COMMAND_RETURN_SWITCHES</a>, <a class="el" href="SMBExample_8h-source.html#l00028">SMB_COMMAND_RETURN_VENDOR_STRING</a>, <a class="el" href="SMBExample_8h-source.html#l00030">SMB_COMMAND_SET_EE_POINTER</a>, <a class="el" href="SMBExample_8h-source.html#l00037">SMB_COMMAND_SUM_OF_BYTES</a>, <a class="el" href="SMBExample_8h-source.html#l00035">SMB_COMMAND_WRITE_LED_BLOCK</a>, <a class="el" href="SMBExample_8h-source.html#l00033">SMB_COMMAND_WRITE_LED_BYTE</a>, <a class="el" href="SMBExample_8h-source.html#l00034">SMB_COMMAND_WRITE_LED_WORD</a>, and <a class="el" href="SMBExample_8c-source.html#l00473">UndefinedCommand()</a>.</p>

<p>Referenced by <a class="el" href="SMBSlave_8c-source.html#l00086">SMBus_ISR()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00125"></a>00125 {
<a name="l00126"></a>00126     <span class="keywordflow">if</span> (<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>-&gt;state == SMB_STATE_WRITE_REQUESTED)
<a name="l00127"></a>00127     {
<a name="l00128"></a>00128         <span class="keywordflow">switch</span> (<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>-&gt;rxBuffer[0]) <span class="comment">// Command code.</span>
<a name="l00129"></a>00129         {
<a name="l00130"></a>00130             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#d6034ad0d72529d10f22ff3346bb9d82">SMB_COMMAND_RETURN_VENDOR_STRING</a>:  <span class="comment">// Block read, vendor ID.</span>
<a name="l00131"></a>00131                 <a class="code" href="SMBExample_8c.html#746ef9f2947d7468f86d6cafee508747" title="Returns a vendor string in response to a Block read.">ReturnVendorString</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00132"></a>00132                 <span class="keywordflow">break</span>;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#719971191df08fcae859097794ab7d23">SMB_COMMAND_RETURN_SWITCHES</a>:  <span class="comment">// Read byte, buttons.</span>
<a name="l00135"></a>00135                 <a class="code" href="SMBExample_8c.html#0f977c2317bffa6e0c173b79f408f011" title="Returns switches pressed on STK500 as a number.">ReturnSwitchesPressed</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00136"></a>00136                 <span class="keywordflow">break</span>;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#e1027d1453db8e1c98d0e79769cc3054">SMB_COMMAND_SET_EE_POINTER</a>:  <span class="comment">// Write word, EEPROM pointer.</span>
<a name="l00139"></a>00139                 <a class="code" href="SMBExample_8c.html#3dae646080960640600bc6aa47467a9a" title="Sets the EEPROM pointer.">SetEepromPointer</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00140"></a>00140                 <span class="keywordflow">break</span>;
<a name="l00141"></a>00141 
<a name="l00142"></a>00142             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#a44a4000bb452fcbf18b59f0117bdb98">SMB_COMMAND_READ_EE_BYTE</a>:  <span class="comment">// Read byte, EEPROM data.</span>
<a name="l00143"></a>00143                 <a class="code" href="SMBExample_8c.html#aa7366043c4b8c908450df0cba87ae64" title="Returns one byte from EEPROM at the current location of the EEPROM pointer.">ReadEepromByte</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00144"></a>00144                 <span class="keywordflow">break</span>;
<a name="l00145"></a>00145 
<a name="l00146"></a>00146             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#cf822cab2cf061c4ca6506be8b87f594">SMB_COMMAND_READ_EE_WORD</a>:  <span class="comment">// Read word, EEPROM data.</span>
<a name="l00147"></a>00147                 <a class="code" href="SMBExample_8c.html#fe7c933c036f418a6f2d42df520f3301" title="Returns two bytes from EEPROM at the current location of the EEPROM pointer.">ReadEepromWord</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00148"></a>00148                 <span class="keywordflow">break</span>;
<a name="l00149"></a>00149 
<a name="l00150"></a>00150             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#53b3e115c56a814203a0ec589a5636ed">SMB_COMMAND_WRITE_LED_BYTE</a>:  <span class="comment">// Write byte, LEDs.</span>
<a name="l00151"></a>00151                 <a class="code" href="SMBExample_8c.html#8f3db79f2ca9e287b3ebdb28da51f442" title="Output 1 byte to LEDS on STK500.">OutputLedByte</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00152"></a>00152                 <span class="keywordflow">break</span>;
<a name="l00153"></a>00153 
<a name="l00154"></a>00154             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#eeb5209cfcbfd4987706653faab11c6d">SMB_COMMAND_WRITE_LED_WORD</a>:  <span class="comment">// Write word, LEDs.</span>
<a name="l00155"></a>00155                 <a class="code" href="SMBExample_8c.html#cf79be93e1ce5f2fad3da448e9d599b2" title="Output 2 bytes to LEDS on STK500.">OutputLedWord</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00156"></a>00156                 <span class="keywordflow">break</span>;
<a name="l00157"></a>00157 
<a name="l00158"></a>00158             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#8d6579276962ceb57c807b89e6703ba5">SMB_COMMAND_WRITE_LED_BLOCK</a>:  <span class="comment">// Block write, LEDs.</span>
<a name="l00159"></a>00159                 <a class="code" href="SMBExample_8c.html#0948a2f2bb2fcb95e7681f2f624a2269" title="Output data block to LEDS on STK500.">OutputLedBlock</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00160"></a>00160                 <span class="keywordflow">break</span>;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#c51b255107344fc628ea56703995e0be">SMB_COMMAND_MULTIPLY_BY_TWO</a>: <span class="comment">// Process call, Multiply by two.</span>
<a name="l00163"></a>00163                 <a class="code" href="SMBExample_8c.html#6b2b442052e73e99fe19fe1613826e57" title="Treat the incoming parameter as a word and return the parameter * 2.">ReturnParameterTimesTwo</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00164"></a>00164                 <span class="keywordflow">break</span>;
<a name="l00165"></a>00165 
<a name="l00166"></a>00166             <span class="keywordflow">case</span> <a class="code" href="SMBExample_8h.html#635a666ff995efcc0e9cfb22cf55176a">SMB_COMMAND_SUM_OF_BYTES</a>:  <span class="comment">// Block write, block read process call. Sum of bytes.</span>
<a name="l00167"></a>00167                 <a class="code" href="SMBExample_8c.html#46939d717b4181fd5b680afbe4eed4c3" title="Sums each byte received and returns the sum as a word.">ReturnSumOfBytes</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00168"></a>00168                 <span class="keywordflow">break</span>;
<a name="l00169"></a>00169             <span class="keywordflow">default</span>:
<a name="l00170"></a>00170                 <a class="code" href="SMBExample_8c.html#08ef0d026f763c130beb882aca00df6c" title="Handles undefined commands.">UndefinedCommand</a>(<a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>);
<a name="l00171"></a>00171                 <span class="keywordflow">break</span>;
<a name="l00172"></a>00172         }
<a name="l00173"></a>00173     }
<a name="l00174"></a>00174     <span class="keywordflow">else</span>
<a name="l00175"></a>00175     {
<a name="l00176"></a>00176         <a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>-&gt;state = SMB_STATE_IDLE;
<a name="l00177"></a>00177     }
<a name="l00178"></a>00178 }
</pre></div>
<p>

<p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<p><center><img src="SMBExample_8h_5cba462a6c300e74f28f73f6274a66b5_cgraph.gif" border="0" usemap="#SMBExample_8h_5cba462a6c300e74f28f73f6274a66b5_cgraph_map" alt=""></center>
<map name="SMBExample_8h_5cba462a6c300e74f28f73f6274a66b5_cgraph_map">
<area shape="rect" href="SMBExample_8c.html#0948a2f2bb2fcb95e7681f2f624a2269" title="Output data block to LEDS on STK500." alt="" coords="208,5,323,32"><area shape="rect" href="SMBExample_8c.html#8f3db79f2ca9e287b3ebdb28da51f442" title="Output 1 byte to LEDS on STK500." alt="" coords="212,56,319,83"><area shape="rect" href="SMBExample_8c.html#cf79be93e1ce5f2fad3da448e9d599b2" title="Output 2 bytes to LEDS on STK500." alt="" coords="209,107,321,133"><area shape="rect" href="SMBExample_8c.html#aa7366043c4b8c908450df0cba87ae64" title="Returns one byte from EEPROM at the current location of the EEPROM pointer." alt="" coords="204,157,327,184"><area shape="rect" href="SMBExample_8c.html#fe7c933c036f418a6f2d42df520f3301" title="Returns two bytes from EEPROM at the current location of the EEPROM pointer." alt="" coords="201,208,329,235"><area shape="rect" href="SMBExample_8c.html#6b2b442052e73e99fe19fe1613826e57" title="Treat the incoming parameter as a word and return the parameter * 2." alt="" coords="177,259,353,285"><area shape="rect" href="SMBExample_8c.html#46939d717b4181fd5b680afbe4eed4c3" title="Sums each byte received and returns the sum as a word." alt="" coords="199,309,332,336"><area shape="rect" href="SMBExample_8c.html#0f977c2317bffa6e0c173b79f408f011" title="Returns switches pressed on STK500 as a number." alt="" coords="185,360,345,387"><area shape="rect" href="SMBExample_8c.html#746ef9f2947d7468f86d6cafee508747" title="Returns a vendor string in response to a Block read." alt="" coords="199,411,332,437"><area shape="rect" href="SMBExample_8c.html#3dae646080960640600bc6aa47467a9a" title="Sets the EEPROM pointer." alt="" coords="201,461,329,488"><area shape="rect" href="SMBExample_8c.html#08ef0d026f763c130beb882aca00df6c" title="Handles undefined commands." alt="" coords="197,512,333,539"></map>
</div>

</div>
</div><p>
<a class="anchor" name="d62558a9ac4e46e16d51ba623ef7525d"></a><!-- doxytag: member="SMBExample.h::ProcessReceiveByte" ref="d62558a9ac4e46e16d51ba623ef7525d" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ProcessReceiveByte           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prepares the response to a Receive Byte protocol.. 
<p>
This function gets called whenever a SLA+R has been received right after a Start condition. If the Receive byte protocol is supported, data should be put in smb-&gt;txBuffer[0] and smb-&gt;txLength should be set to 1.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>smb</em>&nbsp;</td><td>Pointer to the SMBus driver's SMBData struct.</td></tr>
  </table>
</dl>
<dl class="note" compact><dt><b>Note:</b></dt><dd>While this runs the SMBCLK is held low, and it is thus important to keep the functions short enough not to violate the SMBus T_LOW:SEXT of 25ms. If this happens, the master will time out and drop the lines, and since the AVR's TWI module is I2C compatible there is no timeout in the TWI module. The AVR can then hold the SMBDAT line low waiting for clock, and thus block the bus indefinitely. </dd></dl>

<p>Definition at line <a class="el" href="SMBExample_8c-source.html#l00052">52</a> of file <a class="el" href="SMBExample_8c-source.html">SMBExample.c</a>.</p>

<p>Referenced by <a class="el" href="SMBSlave_8c-source.html#l00086">SMBus_ISR()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00053"></a>00053 {
<a name="l00054"></a>00054     <a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>-&gt;txBuffer[0] = ~PIND;
<a name="l00055"></a>00055     <a class="code" href="SMBSlave_8c.html#61d313edd59dcb471a4c000d3053c666" title="SMBus driver data.">smb</a>-&gt;txLength = 1;
<a name="l00056"></a>00056 }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="befd3df1eb8bf2f09ce989ea54ff734d"></a><!-- doxytag: member="SMBExample.h::ReadEepromByte" ref="befd3df1eb8bf2f09ce989ea54ff734d" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReadEepromByte           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="930726c0213764c7f8ee449f3a197c93"></a><!-- doxytag: member="SMBExample.h::ReadEepromWord" ref="930726c0213764c7f8ee449f3a197c93" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReadEepromWord           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="c5f8d3855e963e841da6f31237070401"></a><!-- doxytag: member="SMBExample.h::ReturnParameterTimesTwo" ref="c5f8d3855e963e841da6f31237070401" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReturnParameterTimesTwo           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e768cd46e76417601b6278b2e57be69d"></a><!-- doxytag: member="SMBExample.h::ReturnSumOfBytes" ref="e768cd46e76417601b6278b2e57be69d" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReturnSumOfBytes           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="a3e5d166dcbef5782cd80215c5b0c652"></a><!-- doxytag: member="SMBExample.h::ReturnSwitchesPressed" ref="a3e5d166dcbef5782cd80215c5b0c652" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReturnSwitchesPressed           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="8de78c331eb9348dfc6e27d7a75dd484"></a><!-- doxytag: member="SMBExample.h::ReturnVendorString" ref="8de78c331eb9348dfc6e27d7a75dd484" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ReturnVendorString           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="5a8fba23357f9086d924367b0b6a52b8"></a><!-- doxytag: member="SMBExample.h::SetEepromPointer" ref="5a8fba23357f9086d924367b0b6a52b8" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SetEepromPointer           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="8708350f7bd6e45dd828f9375c3d1ab8"></a><!-- doxytag: member="SMBExample.h::UndefinedCommand" ref="8708350f7bd6e45dd828f9375c3d1ab8" args="(SMBData *smb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UndefinedCommand           </td>
          <td>(</td>
          <td class="paramtype">SMBData *&nbsp;</td>
          <td class="paramname"> <em>smb</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
</div>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
  <title>@DOC_TITLE@</title>
  <link href="doxygen.css" rel="stylesheet" type="text/css">
</head>
<body>

<table width="100%" height="10%" bgcolor="#FFFFFF">
  <tr>
    <td colspan="6" height="1" background="blue.gif"></td>
  </tr>

  <tr>
    <td colspan="6">
    <address style="align: right;"><small>
Generated on Wed Aug 4 11:01:56 2010 for AVR474 Firmware User's Guide for SB202 by <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0></a> 1.5.6</small></address>
    </td>
  </tr>

</table>
